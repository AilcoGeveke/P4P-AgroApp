var agroApp=angular.module("AgroApp");agroApp.controller("LoginView",function(e,o){var n;e.openMenu=function(e,o){n=o,e(o)}}),agroApp.controller("AppCtrl",function(e,o,n,r){function t(n,r,t){var i;return function(){var t=e,a=Array.prototype.slice.call(arguments);o.cancel(i),i=o(function(){i=void 0,n.apply(t,a)},r||10)}}function i(e){return t(function(){n(e).toggle().then(function(){r.debug("toggle "+e+" is done")})},200)}e.toggleLeft=i("left")}),agroApp.controller("LeftCtrl",function(e,o,n,r){e.close=function(){n("left").close().then(function(){r.debug("close LEFT is done")})}}),agroApp.controller("UserEdit",function(e,o,n,r){e.rollen=["Gebruiker","Admin"],e.showConfirmArchiveDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Gebruiker Verwijderen").textContent("Als u doorgaat zal de machine definitief verwijderd worden!").targetEvent(e).ok("Gebruiker Archiveren").cancel("Annuleer");r.show(o).then(function(){i()},function(){$rootscope.showloading--})},e.showConfirmChangePasswordDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Als u doorgaat zal het wachtwoord van deze gebruiker gereset worden!").textContent("Het nieuwe wachtwoord zal op het scherm getoond worden. Geef deze aan de medewerker door!").targetEvent(e).ok("Reset").cancel("Annuleer");r.show(o).then(function(){$rootscope.showloading--},function(){$rootscope.showloading--})},e.showConfirmChangesDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Wijzigingen Toepassen?").textContent("Als u doorgaat zullen de wijzigingen opgeslagen worden!").targetEvent(e).ok("Wijzigingen Toepassen").cancel("Annuleer");r.show(o).then(function(){t()},function(){$rootscope.showloading--})},e.ArchiefGebruikers=[],e.getArchiefUserData=function(){$rootscope.showloading++,o({method:"GET",url:"/api/account/getarchiefusers",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){e.ArchiefGebruikers=o,$rootscope.showloading--})},e.gebruikerid=0,e.ConfirmReAdd=function(o){e.gebruikerid=o,e.showConfirmReAddDialog()},e.showConfirmReAddDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Gebruiker dearchiveren").textContent("Als u doorgaat zal deze gebruiker gedearchiveerd worden!").targetEvent(e).ok("Dearchiveren").cancel("Annuleer");r.show(o).then(function(){a()},function(){$rootscope.showloading--})};var t=function(){e.showloading=!0,o({method:"GET",url:"/api/user/wijzigen/"+e.userDetails.id+"/"+e.userDetails.naam+"/"+e.userDetails.email+"/"+e.userDetails.rol,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/gebruikers"):(e.showloading=!1,e.showError=!0,e.errorMessage="De opgegeven waardes zijn ongeldig")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})},i=function(){e.showloading=!0,o({method:"GET",url:"/api/user/archiveren/"+e.userDetails.id,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/gebruikerbeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="De opgegeven waardes zijn ongeldig")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})},a=function(){o({method:"GET",url:"/api/user/gebruikerbeheer/terughalen/"+e.gebruikerid,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/gebruikerbeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="De opgegeven waardes zijn ongeldig")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})}}),agroApp.controller("VehicleEdit",function(e,o,n,r){e.types=["Kraan","Shovel","Trekker","Dumper","Wagen","Tank","Ladewagen","Strandreiniging","Gladheid","Auto","Apparaat","Trilplaat","Meetapparatuur","Aanhanger","Hulpstuk","Overige"],e.showConfirmChangesDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Wijzigingen Toepassen?").textContent("Als u doorgaat zullen de wijzigingen opgeslagen worden!").targetEvent(e).ok("Wijzigingen Toepassen").cancel("Annuleer");r.show(o).then(function(){t()},function(){$rootscope.showloading--})},e.showConfirmDeleteDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Machine Verwijderen").textContent("Als u doorgaat zal de machine definitief verwijderd worden!").targetEvent(e).ok("Machine Verwijderen").cancel("Annuleer");r.show(o).then(function(){i()},function(){$rootscope.showloading--})},e.ArchiefMachines=[],e.getArchiefMachines=function(){$rootscope.showloading++,o({method:"GET",url:"/api/werkbon/getarchiefmachine",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){e.ArchiefMachines=o,$rootscope.showloading--})},e.machineid=0,e.ConfirmReAdd=function(o){e.machineid=o,e.showConfirmReAddDialog()},e.showConfirmReAddDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Machine dearchiveren").textContent("Als u doorgaat zal deze machine gedearchiveerd worden!").targetEvent(e).ok("Dearchiveren").cancel("Annuleer");r.show(o).then(function(){a()},function(){$rootscope.showloading--})},e.AddMachine=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/addmachine/"+e.machineDetails.naam+"/"+e.machineDetails.nummer+"/"+e.machineDetails.kenteken+"/"+e.machineDetails.type,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/machinebeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="Het machinenummer is al geregistreerd")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})};var t=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/editmachine/"+e.machineDetails.id+"/"+e.machineDetails.naam+"/"+e.machineDetails.nummer+"/"+e.machineDetails.kenteken+"/"+e.machineDetails.cato,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/machinebeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="De opgegeven waardes zijn ongeldig")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})},i=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/deletemachine/"+e.machineDetails.id,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/machinebeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="Er is geen machine geselecteerd!")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})},a=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/machine/terughalen/"+e.machineid,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/machinebeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="Er is geen machine geselecteerd!")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})}}),agroApp.controller("KlantEdit",function(e,o,n,r){e.showConfirmChangesDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Wijzigingen Toepassen?").textContent("Als u doorgaat zullen de wijzigingen opgeslagen worden!").targetEvent(e).ok("Wijzigingen Toepassen").cancel("Annuleer");r.show(o).then(function(){i()},function(){$rootscope.showloading--})},e.showConfirmDeleteDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Klant Archiveren").textContent("Als u doorgaat zal deze klant gearchiveerd worden!").targetEvent(e).ok("Klant Archiveren").cancel("Annuleer");r.show(o).then(function(){a()},function(){$rootscope.showloading--})},e.klantid=0,e.ConfirmReAdd=function(o){e.klantid=o,e.showConfirmReAddDialog()},e.showConfirmReAddDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Klant Dearchiveren").textContent("Als u doorgaat zal deze klant gedearchiveerd worden").targetEvent(e).ok("Dearchiveren").cancel("Annuleer");r.show(o).then(function(){t()},function(){$rootscope.showloading--})},e.AddKlant=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/addklant/"+e.klantDetails.naam+"/"+e.klantDetails.adres,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/klantbeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="Deze klant is al geregistreerd!")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})};var t=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/klant/terughalen/"+e.klantid,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/klantbeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="Er is geen klant geselecteerd!")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})};e.selectedKlanten=[],e.klanten=[],e.getKlanten=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/getklanten",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){e.klanten=o})},e.ArchiefKlanten=[],e.getArchiefKlanten=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/getarchiefklanten",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){e.ArchiefKlanten=o})};var i=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/editklant/"+e.klantDetails.id+"/"+e.klantDetails.naam+"/"+e.klantDetails.adres,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/klantbeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="De opgegeven waardes zijn ongeldig")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})},a=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/deleteklant/"+e.klantDetails.id,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){1==o?n.changeView("admin/klantbeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="Er is geen klant geselecteerd!")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})}}),agroApp.controller("WerkbonEdit",function(e,o,n){"use strict";function r(e,o){return e?o.filter(t(e)):o}function t(e){var o=angular.lowercase(e);return function(e){return 0===e.Name.toLowerCase().indexOf(o)}}var i=this;$rootscope.showloading=0,e.getManKeuzeData=function(){e.showloading=!0,n({method:"GET",url:"/api/werkbon/getmankeuze",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){e.man=o})},e.checkRole=function(){changeView(User.IsInRole("Administrator")?"admin/main":"werknemer/menu")},e.selectedMachines=[],e.selectedUsers=[],e.machines=[],e.selectedGewichten=[],e.gewichten=["Zand","Gemengde grond","Gezeefde grond","Woudgrond","Compost","Menggranulaat","Kleischelpen","Schone schelpen","Houtchips"],e.getMachines=function(){e.showloading=!0,n({method:"GET",url:"/api/werkbon/getmachines",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){e.machines=o})},e.increaseSelectedMachineList=function(){e.selectedMachines.push(e.machines[0])},e.decreaseSelectedMachineList=function(){e.selectedMachines.pop()},e.increaseSelectedGewichtenList=function(){e.selectedGewichten.push(e.gewichten[0])},e.decreaseSelectedGewichtenList=function(){e.selectedGewichten.pop()},e.increaseSelectedUserList=function(){e.selectedUsers.push(e.gebruikers[0])},e.decreaseSelectedUsersList=function(){e.selectedUsers.pop()},e.selectedHulpstukken=[],e.hulpstukken=[],e.getHulpstukken=function(){e.showloading=!0,n({method:"GET",url:"/api/werkbon/gethulpstukken",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){e.hulpstukken=o})},i.selectedGebruikers=[],i.gebruikers=[],e.getAllUserData=function(){o.showLoading++,n({method:"GET",url:"/api/account/getfulllist",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(e){i.gebruikers=e,o.showLoading--}).error(function(e){o.showLoading--})},i.selectedKlant="",i.klanten=[],e.getKlanten=function(){o.showloading++,n({method:"GET",url:"/api/werkbon/getklanten",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(e){i.klanten=e,o.showloading--}).error(function(e){o.showloading--})},e.submitWerkbonAdd=function(){console.log(e.selectedMachines)},e.submitWerkbon=function(){$rootscope.showloading++;var r=JSON.stringify({Gebruiker:e.selectedGebruiker,Datum:e.opdracht.datum,Klant:e.klant,ManKeuze:e.manKeuze,Machines:i.selectedMachines,Hulpstukken:i.selectedHulpstukken,VanTijd:e.werktijd.van,TotTijd:e.werktijd.tot,TotaalTijd:e.werktijd.urenTotaal,verbruiktematerialen:e.werktijd.verbruikteMaterialen,opmerking:e.werktijd.opmerking,IdOpdrachtWerknemer:e.werknemerOpdracht.id});n.post("/api/werkbon/toevoegen",r).success(function(e,n,r,t){$rootscope.showloading--,o.changeView("admin/planning")})},e.submitOpdracht=function(){$rootscope.showloading++;var r=JSON.stringify({klant:i.selectedKlant,gebruikers:i.selectedGebruiker,locatie:e.opdracht.adres,beschrijving:e.opdracht.omschrijving,datum:e.opdracht.datum});n.post("/api/opdracht/toevoegen",r).success(function(e,n,r,t,i){$rootscope.showloading--,o.showMessage=!0,o.message="Opdracht succesvol toegevoegd!",i(function(){o.showMessage=!1},5e3)}).error(function(e,n){o.showMessage=!0,o.message="Er ging iets mis! "+e,n(function(){o.showMessage=!1},5e3)})},e.onUrenChange=function(o){if(o)e.werktijd.van=new Date(1970,1,1,0,0,0,0),e.werktijd.tot=new Date(1970,1,1,0,0,0,0);else{var n=e.werktijd.tot-e.werktijd.van,r=n/1e3,t=r/60,i=t/60;e.werktijd.urenTotaal=new Date(1970,1,1,i%24,t%60,0,0)}},e.onGewichtChange=function(o){o?(e.gewicht.vol=new Number(0),e.gewicht.leeg=new Number(0)):e.gewicht.netto=e.gewicht.vol-e.gewicht.leeg},i.querySearch=r,i.machineSelectie=[],i.selectedMachine=""}),agroApp.controller("WerknemerEdit",function(e,o,n,r){e.showConfirmChangePasswordDialog=function(e){$rootscope.showloading++;var o=r.confirm().title("Als u doorgaat zal het wachtwoord worden veranderd.").targetEvent(e).ok("Wijzig").cancel("Annuleer");r.show(o).then(function(){$rootscope.showloading--},function(){$rootscope.showloading--})}}),agroApp.controller("Query",function(e,o,n,r){e.print=[],e.getArchiefMachines=function(){$rootscope.showloading++,o({method:"GET",url:"/api/werkbon/getdata",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){e.print=o,$rootscope.showloading--})}}),agroApp.controller("OpdrachtView",function(e,o,n,r){e.WerknemerOpdrachten=[],e.getGebruikerOpdrachten=function(){$rootscope.showloading++,o.get("/werknemer/getgebruikeropdrachten").success(function(o){console.log(o),e.WerknemerOpdrachten=o,$rootscope.showloading--})},e.werknemeropdrachten=[],e.getOpdrachtWerknemer=function(){$rootscope.showloading++,o.get("/werknemer/getopdrachtwerknemer/").success(function(o){console.log(o),e.opdrachten=o,$rootscope.showloading--})}}),agroApp.controller("PlanningView",function(e,o,n){e.gebruikerTijden=[],e.geselecteerdeDagDatum=new Date,e.geselecteerdeWeekDatum=new Date,n.showLoading=0,e.updateGebruikersDag=function(){n.showLoading++,o.get("/api/planning/getGebruikersWerktijden/"+e.geselecteerdeDagDatum.getTime()).success(function(o){e.gebruikerTijden=o,n.showLoading--}).error(function(e,o){n.showLoading--,console.log(e),n.showMessage=!0,n.message="Er ging iets mis! Probeer het later opnieuw.",o(function(){n.showMessage=!1},5e3)})},e.updateGebruikersWeek=function(){e.weekNummer=e.geselecteerdeWeekDatum.getWeek()},e.tijden=[],e.setTijdenRange=function(){for(e.tijden=[],uur=6;uur<=20;uur++)e.tijden.push(uur+":00"),20!=uur&&e.tijden.push(uur+":30")},e.opdrachten=[],e.getOpdrachten=function(){n.showLoading++,o.get("/api/opdracht/alle/false").success(function(o){e.opdrachten=o,n.showLoading--}).error(function(e){n.showLoading--})},e.opdrachtGeenDatumFilter=function(e){return null===e.datum},e.opdrachtGeenWerknemersFilter=function(e){return 0===e.gebruikerCount},e.opdrachtLopendFilter=function(e){var o=new Date(e.datum);return null!=e.datum&&0!=e.gebruikerCount&&o.getTime()<=(new Date).getTime()},e.opdrachtGeplandFilter=function(e){var o=new Date(e.datum);return null!=e.datum&&0!=e.gebruikerCount&&o.getTime()>(new Date).getTime()}}),Date.prototype.getWeek=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)};var agroApp=angular.module("AgroApp");agroApp.controller("loginController",function(e,o,n){e.userDetails={},e.showloading=!1,e.showError=!1,e.goLogin=function(){e.showloading=!0,n({method:"GET",url:"/api/user/login/"+e.userDetails.email+"/"+e.userDetails.password,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){o?window.location.href=o:(e.showloading=!1,e.showError=!0,e.errorMessage="De opgegeven combinatie is incorrect")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een administrator"})},e.goRegister=function(){e.showloading=!0,n({method:"GET",url:"/api/user/register/"+e.userDetails.email+"/"+e.userDetails.password+"/"+e.userDetails.fullname+"/"+e.userDetails.rol,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){"true"==o?window.location.href="/admin/gebruikers":(e.showloading=!1,e.showError=!0,e.errorMessage="De opgegeven combinatie is incorrect")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een administrator"})}});var agroApp=angular.module("AgroApp");agroApp.controller("Navigation",function(e,o,n,r){r.showloading=!1,r.changeView=function(e){r.showLoading=!0,window.location.href="../../../"+e},e.goLogout=function(){r.showloading=!0,n({method:"GET",url:"/api/login/logout",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).then(function(e){window.location.href="/"},function(e){window.location.href="/"})}});var agroApp=angular.module("AgroApp");agroApp.controller("PlanningView",function(e){}),agroApp.factory("getUsers",function(){return function(){$http({method:"GET",url:"/api/user/getallegebruikers",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(e){return e})}}),agroApp.factory("getCustomers",function(){return function(){$http({method:"GET",url:"/api/werkbon/getklanten",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(e){return e})}});