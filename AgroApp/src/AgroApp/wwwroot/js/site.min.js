var agroApp=angular.module("AgroApp");agroApp.controller("LoginView",function(e,n){var o;e.openMenu=function(e,n){o=n,e(n)}}),agroApp.controller("AppCtrl",function(e,n,o,i){function t(o,i,t){var r;return function(){var t=e,a=Array.prototype.slice.call(arguments);n.cancel(r),r=n(function(){r=void 0,o.apply(t,a)},i||10)}}function r(e){return t(function(){o(e).toggle().then(function(){i.debug("toggle "+e+" is done")})},200)}e.toggleLeft=r("left")}),agroApp.controller("LeftCtrl",function(e,n,o,i){e.close=function(){o("left").close().then(function(){i.debug("close LEFT is done")})}}),agroApp.controller("UserView",function(e,n,o){e.gebruikers=[],e.getAllUserData=function(){o.showLoading=!0,n({method:"GET",url:"/api/account/getfulllist",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(n){e.gebruikers=n,o.showLoading=!1})},e.tijden=[],e.setTijdenRange=function(){for(uur=6;uur<20;uur++)e.tijden.push(uur+":00"),e.tijden.push(uur+":30")}}),agroApp.controller("UserEdit",function(e,n,o,i){e.rollen=["Gebruiker","Admin"],e.showConfirmChangePasswordDialog=function(e){o.showLoading=!0;var n=i.confirm().title("Als u doorgaat zal het wachtwoord van deze gebruiker gereset worden!").textContent("Het nieuwe wachtwoord zal op het scherm getoond worden. Geef deze aan de medewerker door!").targetEvent(e).ok("Reset").cancel("Annuleer");i.show(n).then(function(){o.showLoading=!1},function(){o.showLoading=!1})},e.showConfirmChangesDialog=function(e){o.showLoading=!0;var n=i.confirm().title("Wijzigingen Toepassen?").textContent("Als u doorgaat zullen de wijzigingen opgeslagen worden!").targetEvent(e).ok("Wijzigingen Toepassen").cancel("Annuleer");i.show(n).then(function(){o.changeView("admin/gebruikers")},function(){o.showLoading=!1})}}),agroApp.controller("VehicleEdit",function(e,n,o,i){e.types=["Kranen","Shovels","Trekkers","Dumpers","Wagens","Tanks","Ladewagens","Strandreinigen","Gladheid","Auto s","Apparaten","Trilplaten","Meetapparatuur","Aanhangers","Hulpstukken","Overige"],e.showConfirmChangesDialog=function(e){o.showLoading=!0;var n=i.confirm().title("Wijzigingen Toepassen?").textContent("Als u doorgaat zullen de wijzigingen opgeslagen worden!").targetEvent(e).ok("Wijzigingen Toepassen").cancel("Annuleer");i.show(n).then(function(){o.changeView("admin/machinebeheer")},function(){o.showLoading=!1})},e.showConfirmDeleteDialog=function(e){o.showLoading=!0;var n=i.confirm().title("Machine Verwijderen").textContent("Als u doorgaat zal de machine definitief verwijderd worden! LET OP: Als u deze machine eerder heeft gebruikt in een werbon, zal de data van deze werkbonnen corrupt worden").targetEvent(e).ok("Machine Verwijderen").cancel("Annuleer");i.show(n).then(function(){o.changeView("admin/machinebeheer")},function(){o.showLoading=!1})},e.AddMachine=function(){e.showloading=!0,n({method:"GET",url:"/api/werkbon/addmachine/"+e.machineDetails.naam+"/"+e.machineDetails.nummer+"/"+e.machineDetails.kenteken+"/"+e.machineDetails.type,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(n){1==n?o.changeView("admin/machinebeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="Het machinenummer is al geregistreerd")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})},e.EditMachine=function(){e.showloading=!0,n({method:"GET",url:"/api/werkbon/editmachine/"+e.machineDetails.id+"/"+e.machineDetails.naam+"/"+e.machineDetails.nummer+"/"+e.machineDetails.kenteken+"/"+e.machineDetails.type,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(n){"true"==n?o.changeView("admin/machinebeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="De opgegeven waardes zijn ongeldig")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})},e.DeleteMachine=function(){e.showloading=!0,n({method:"GET",url:"/api/werkbon/deletemachine/"+e.machineDetails.id,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(n){"true"==n?o.changeView("admin/machinebeheer"):(e.showloading=!1,e.showError=!0,e.errorMessage="Er is geen machine geselecteerd!")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een beheerder"})},e.test=function(n){e.machineDetails.cato=n,console.log(e.machineDetails.cato),console.log(e.machineDetails.nummer)}}),agroApp.controller("WerkbonEdit",function(e,n,o){e.manKeuze=[],n.showloading=!1,e.getManKeuzeData=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/getmankeuze",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(n){e.man=n})},e.selectedMachines=[],e.machines=[],e.getMachines=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/getmachines",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(n){e.machines=n})},e.increaseSelectedMachineList=function(){e.selectedMachines.push(e.machines[0])},e.decreaseSelectedMachineList=function(){e.selectedMachines.pop()},e.selectedHulpstukken=[],e.hulpstukken=[],e.getHulpstukken=function(){e.showloading=!0,o({method:"GET",url:"/api/werkbon/gethulpstukken",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(n){e.hulpstukken=n})},e.gebruikers=[],e.getAllUserData=function(){n.showLoading=!0,o({method:"GET",url:"/api/account/getfulllist",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(o){e.gebruikers=o,n.showLoading=!1})},e.submitWerkbonAdd=function(){console.log(e.selectedMachines)},e.onUrenChange=function(n){if(n)e.tijd.van=new Date(1970,1,1,0,0,0,0),e.tijd.tot=new Date(1970,1,1,0,0,0,0);else{var o=e.tijd.tot-e.tijd.van,i=o/1e3,t=i/60,r=t/60;e.tijd.aantal=new Date(1970,1,1,r%24,t%60,0,0)}},e.onGewichtChange=function(n){n?(e.gewicht.vol=new Number(0),e.gewicht.leeg=new Number(0)):e.gewicht.netto=e.gewicht.vol-e.gewicht.leeg}});var agroApp=angular.module("AgroApp");agroApp.controller("loginController",function(e,n,o){e.userDetails={},e.showloading=!1,e.showError=!1,e.goLogin=function(){e.showloading=!0,o({method:"GET",url:"/api/user/login/"+e.userDetails.email+"/"+e.userDetails.password,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(n){"true"==n?window.location.href="/admin/main":(e.showloading=!1,e.showError=!0,e.errorMessage="De opgegeven combinatie is incorrect")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een administrator"})},e.goRegister=function(){e.showloading=!0,o({method:"GET",url:"/api/user/register/"+e.userDetails.email+"/"+e.userDetails.password+"/"+e.userDetails.fullname+"/"+e.userDetails.rol,params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).success(function(n){"true"==n?window.location.href="/admin/gebruikers":(e.showloading=!1,e.showError=!0,e.errorMessage="De opgegeven combinatie is incorrect")}).error(function(){e.showloading=!1,e.showError=!0,e.errorMessage="Er is iets misgegaan! Probeer het opnieuw of neem contact op met een administrator"})}});var agroApp=angular.module("AgroApp");agroApp.controller("Navigation",function(e,n,o,i){i.showloading=!1,i.changeView=function(e){i.showLoading=!0,window.location.href="../../../"+e},e.goLogout=function(){i.showloading=!0,o({method:"GET",url:"/api/login/logout",params:"limit=10, sort_by=created:desc",headers:{Authorization:"Token token=xxxxYYYYZzzz"}}).then(function(e){window.location.href="/"},function(e){window.location.href="/"})}});